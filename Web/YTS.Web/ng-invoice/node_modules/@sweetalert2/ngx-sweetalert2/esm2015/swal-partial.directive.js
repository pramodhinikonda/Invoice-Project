/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { ApplicationRef, ComponentFactoryResolver, Directive, Host, Injector, Input, TemplateRef } from '@angular/core';
import { SwalPartialTargets } from './swal-partial-targets';
import { SwalPartialComponent } from './swal-partial.component';
import { SwalComponent } from './swal.component';
/**
 * A structural directive that lets you use Angular templates inside of Sweet Alerts.
 * There are different targetable zones in a Sweet Alert: title, content, confirmButton, cancelButton, buttonsWrapper.
 * The default target is the content zone.
 *
 * Usage in your component's TypeScript code-behind (if you use another target than "content"):
 *
 * \@Component({ ... })
 *     export class MyComponent {
 *         public constructor(public readonly swalTargets: SwalPartialTargets) {
 *         }
 *     }
 *
 * Usage in the template:
 *
 *     <swal title="Fill the form" (confirm)="confirmHandler()">
 *         <!-- This form will be displayed as the alert main content
 *              Targets the alert's main content zone by default -->
 *         <form *swalPartial [formControl]="myForm">
 *             ...
 *         </form>
 *
 *         <!-- This targets the confirm button's inner content
 *              Notice the usage of ng-container to avoid creating an useless DOM element inside the button -->
 *         <ng-container *swalPartial="swalTargets.confirmButton">
 *              Send ({{ secondsLeft }} seconds left)
 *         </ng-container>
 *     <swal>
 */
export class SwalPartialDirective {
    /**
     * @param {?} resolver
     * @param {?} injector
     * @param {?} app
     * @param {?} templateRef
     * @param {?} swalTargets
     * @param {?} swalComponent
     */
    constructor(resolver, injector, app, templateRef, swalTargets, swalComponent) {
        this.resolver = resolver;
        this.injector = injector;
        this.app = app;
        this.templateRef = templateRef;
        this.swalTargets = swalTargets;
        this.swalComponent = swalComponent;
    }
    /**
     * Subscribes to the the Sweet Alert appearance/disappearance to create/destroy the SwalPartialComponent that will
     * receive the consumer's template.
     * @return {?}
     */
    ngOnInit() {
        this.beforeOpenSubscription = this.swalComponent.beforeOpen.asObservable().subscribe(() => {
            //=> Create the SwalPartialComponent on the target DOM node in the Sweet Alert
            /** @type {?} */
            const targetEl = this.swalPartial ? this.swalPartial() : this.swalTargets.content();
            /** @type {?} */
            const factory = this.resolver.resolveComponentFactory(SwalPartialComponent);
            this.partialRef = factory.create(this.injector, [], targetEl);
            //=> Apply the consumer's template on the component
            this.partialRef.instance.template = this.templateRef;
            //=> Make the Angular app aware of that detached view so change detection works
            this.app.attachView(this.partialRef.hostView);
        });
        this.closeSubscription = this.swalComponent.close.asObservable().subscribe(() => {
            //=> Detach the partial component from the app and destroy it
            this.app.detachView(this.partialRef.hostView);
            this.partialRef.destroy();
        });
    }
    /**
     * Unsubscribes from the Sweet Alert appearance/disappearance.
     * @return {?}
     */
    ngOnDestroy() {
        this.beforeOpenSubscription.unsubscribe();
        this.closeSubscription.unsubscribe();
    }
}
SwalPartialDirective.decorators = [
    { type: Directive, args: [{
                selector: '[swalPartial]'
            },] }
];
/** @nocollapse */
SwalPartialDirective.ctorParameters = () => [
    { type: ComponentFactoryResolver },
    { type: Injector },
    { type: ApplicationRef },
    { type: TemplateRef },
    { type: SwalPartialTargets },
    { type: SwalComponent, decorators: [{ type: Host }] }
];
SwalPartialDirective.propDecorators = {
    swalPartial: [{ type: Input }]
};
if (false) {
    /**
     * Takes a "partial target" or nothing (will target main content zone by default).
     *
     * See the {\@link SwalPartialTargets} service to see the available targets.
     * See the class doc block for more informations.
     * @type {?}
     */
    SwalPartialDirective.prototype.swalPartial;
    /**
     * Holds the component reference of the controlled SwalPartialComponent to destroy it when no longer needed.
     * @type {?}
     */
    SwalPartialDirective.prototype.partialRef;
    /** @type {?} */
    SwalPartialDirective.prototype.beforeOpenSubscription;
    /** @type {?} */
    SwalPartialDirective.prototype.closeSubscription;
    /** @type {?} */
    SwalPartialDirective.prototype.resolver;
    /** @type {?} */
    SwalPartialDirective.prototype.injector;
    /** @type {?} */
    SwalPartialDirective.prototype.app;
    /** @type {?} */
    SwalPartialDirective.prototype.templateRef;
    /** @type {?} */
    SwalPartialDirective.prototype.swalTargets;
    /** @type {?} */
    SwalPartialDirective.prototype.swalComponent;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3dhbC1wYXJ0aWFsLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bzd2VldGFsZXJ0Mi9uZ3gtc3dlZXRhbGVydDIvIiwic291cmNlcyI6WyJzd2FsLXBhcnRpYWwuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsY0FBYyxFQUFFLHdCQUF3QixFQUFnQixTQUFTLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQ3hGLFdBQVcsRUFDZCxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM1RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNoRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtDakQsTUFBTSxPQUFPLG9CQUFvQjs7Ozs7Ozs7O0lBaUI3QixZQUNxQixRQUFrQyxFQUNsQyxRQUFrQixFQUNsQixHQUFtQixFQUNuQixXQUE2QixFQUM3QixXQUErQixFQUN2QixhQUE0QjtRQUxwQyxhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQUNsQyxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLFFBQUcsR0FBSCxHQUFHLENBQWdCO1FBQ25CLGdCQUFXLEdBQVgsV0FBVyxDQUFrQjtRQUM3QixnQkFBVyxHQUFYLFdBQVcsQ0FBb0I7UUFDdkIsa0JBQWEsR0FBYixhQUFhLENBQWU7SUFDekQsQ0FBQzs7Ozs7O0lBTU0sUUFBUTtRQUNYLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFOzs7a0JBRWhGLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFOztrQkFDN0UsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsb0JBQW9CLENBQUM7WUFFM0UsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRTlELG1EQUFtRDtZQUNuRCxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztZQUVyRCwrRUFBK0U7WUFDL0UsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1lBQzVFLDZEQUE2RDtZQUM3RCxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDOUIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDOzs7OztJQUtNLFdBQVc7UUFDZCxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3pDLENBQUM7OztZQTdESixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUFFLGVBQWU7YUFDNUI7Ozs7WUF2Q21CLHdCQUF3QjtZQUFpQyxRQUFRO1lBQWpGLGNBQWM7WUFDZCxXQUFXO1lBR04sa0JBQWtCO1lBRWxCLGFBQWEsdUJBeURiLElBQUk7OzswQkFoQlIsS0FBSzs7Ozs7Ozs7OztJQUFOLDJDQUErQzs7Ozs7SUFLL0MsMENBQXVEOztJQUV2RCxzREFBNkM7O0lBQzdDLGlEQUF3Qzs7SUFHcEMsd0NBQW1EOztJQUNuRCx3Q0FBbUM7O0lBQ25DLG1DQUFvQzs7SUFDcEMsMkNBQThDOztJQUM5QywyQ0FBZ0Q7O0lBQ2hELDZDQUFxRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQXBwbGljYXRpb25SZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQ29tcG9uZW50UmVmLCBEaXJlY3RpdmUsIEhvc3QsIEluamVjdG9yLCBJbnB1dCwgT25EZXN0cm95LCBPbkluaXQsXG4gICAgVGVtcGxhdGVSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFN3YWxQYXJ0aWFsVGFyZ2V0cyB9IGZyb20gJy4vc3dhbC1wYXJ0aWFsLXRhcmdldHMnO1xuaW1wb3J0IHsgU3dhbFBhcnRpYWxDb21wb25lbnQgfSBmcm9tICcuL3N3YWwtcGFydGlhbC5jb21wb25lbnQnO1xuaW1wb3J0IHsgU3dhbENvbXBvbmVudCB9IGZyb20gJy4vc3dhbC5jb21wb25lbnQnO1xuXG4vKipcbiAqIEEgc3RydWN0dXJhbCBkaXJlY3RpdmUgdGhhdCBsZXRzIHlvdSB1c2UgQW5ndWxhciB0ZW1wbGF0ZXMgaW5zaWRlIG9mIFN3ZWV0IEFsZXJ0cy5cbiAqIFRoZXJlIGFyZSBkaWZmZXJlbnQgdGFyZ2V0YWJsZSB6b25lcyBpbiBhIFN3ZWV0IEFsZXJ0OiB0aXRsZSwgY29udGVudCwgY29uZmlybUJ1dHRvbiwgY2FuY2VsQnV0dG9uLCBidXR0b25zV3JhcHBlci5cbiAqIFRoZSBkZWZhdWx0IHRhcmdldCBpcyB0aGUgY29udGVudCB6b25lLlxuICpcbiAqIFVzYWdlIGluIHlvdXIgY29tcG9uZW50J3MgVHlwZVNjcmlwdCBjb2RlLWJlaGluZCAoaWYgeW91IHVzZSBhbm90aGVyIHRhcmdldCB0aGFuIFwiY29udGVudFwiKTpcbiAqXG4gKiAgICAgQENvbXBvbmVudCh7IC4uLiB9KVxuICogICAgIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCB7XG4gKiAgICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgc3dhbFRhcmdldHM6IFN3YWxQYXJ0aWFsVGFyZ2V0cykge1xuICogICAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqIFVzYWdlIGluIHRoZSB0ZW1wbGF0ZTpcbiAqXG4gKiAgICAgPHN3YWwgdGl0bGU9XCJGaWxsIHRoZSBmb3JtXCIgKGNvbmZpcm0pPVwiY29uZmlybUhhbmRsZXIoKVwiPlxuICogICAgICAgICA8IS0tIFRoaXMgZm9ybSB3aWxsIGJlIGRpc3BsYXllZCBhcyB0aGUgYWxlcnQgbWFpbiBjb250ZW50XG4gKiAgICAgICAgICAgICAgVGFyZ2V0cyB0aGUgYWxlcnQncyBtYWluIGNvbnRlbnQgem9uZSBieSBkZWZhdWx0IC0tPlxuICogICAgICAgICA8Zm9ybSAqc3dhbFBhcnRpYWwgW2Zvcm1Db250cm9sXT1cIm15Rm9ybVwiPlxuICogICAgICAgICAgICAgLi4uXG4gKiAgICAgICAgIDwvZm9ybT5cbiAqXG4gKiAgICAgICAgIDwhLS0gVGhpcyB0YXJnZXRzIHRoZSBjb25maXJtIGJ1dHRvbidzIGlubmVyIGNvbnRlbnRcbiAqICAgICAgICAgICAgICBOb3RpY2UgdGhlIHVzYWdlIG9mIG5nLWNvbnRhaW5lciB0byBhdm9pZCBjcmVhdGluZyBhbiB1c2VsZXNzIERPTSBlbGVtZW50IGluc2lkZSB0aGUgYnV0dG9uIC0tPlxuICogICAgICAgICA8bmctY29udGFpbmVyICpzd2FsUGFydGlhbD1cInN3YWxUYXJnZXRzLmNvbmZpcm1CdXR0b25cIj5cbiAqICAgICAgICAgICAgICBTZW5kICh7eyBzZWNvbmRzTGVmdCB9fSBzZWNvbmRzIGxlZnQpXG4gKiAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICogICAgIDxzd2FsPlxuICovXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1tzd2FsUGFydGlhbF0nXG59KVxuZXhwb3J0IGNsYXNzIFN3YWxQYXJ0aWFsRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICAgIC8qKlxuICAgICAqIFRha2VzIGEgXCJwYXJ0aWFsIHRhcmdldFwiIG9yIG5vdGhpbmcgKHdpbGwgdGFyZ2V0IG1haW4gY29udGVudCB6b25lIGJ5IGRlZmF1bHQpLlxuICAgICAqXG4gICAgICogU2VlIHRoZSB7QGxpbmsgU3dhbFBhcnRpYWxUYXJnZXRzfSBzZXJ2aWNlIHRvIHNlZSB0aGUgYXZhaWxhYmxlIHRhcmdldHMuXG4gICAgICogU2VlIHRoZSBjbGFzcyBkb2MgYmxvY2sgZm9yIG1vcmUgaW5mb3JtYXRpb25zLlxuICAgICAqL1xuICAgIEBJbnB1dCgpIHB1YmxpYyBzd2FsUGFydGlhbDogKCkgPT4gSFRNTEVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBIb2xkcyB0aGUgY29tcG9uZW50IHJlZmVyZW5jZSBvZiB0aGUgY29udHJvbGxlZCBTd2FsUGFydGlhbENvbXBvbmVudCB0byBkZXN0cm95IGl0IHdoZW4gbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIHBhcnRpYWxSZWY6IENvbXBvbmVudFJlZjxTd2FsUGFydGlhbENvbXBvbmVudD47XG5cbiAgICBwcml2YXRlIGJlZm9yZU9wZW5TdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgICBwcml2YXRlIGNsb3NlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGluamVjdG9yOiBJbmplY3RvcixcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBhcHA6IEFwcGxpY2F0aW9uUmVmLFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxhbnk+LFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHN3YWxUYXJnZXRzOiBTd2FsUGFydGlhbFRhcmdldHMsXG4gICAgICAgIEBIb3N0KCkgcHJpdmF0ZSByZWFkb25seSBzd2FsQ29tcG9uZW50OiBTd2FsQ29tcG9uZW50KSB7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byB0aGUgdGhlIFN3ZWV0IEFsZXJ0IGFwcGVhcmFuY2UvZGlzYXBwZWFyYW5jZSB0byBjcmVhdGUvZGVzdHJveSB0aGUgU3dhbFBhcnRpYWxDb21wb25lbnQgdGhhdCB3aWxsXG4gICAgICogcmVjZWl2ZSB0aGUgY29uc3VtZXIncyB0ZW1wbGF0ZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYmVmb3JlT3BlblN1YnNjcmlwdGlvbiA9IHRoaXMuc3dhbENvbXBvbmVudC5iZWZvcmVPcGVuLmFzT2JzZXJ2YWJsZSgpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAvLz0+IENyZWF0ZSB0aGUgU3dhbFBhcnRpYWxDb21wb25lbnQgb24gdGhlIHRhcmdldCBET00gbm9kZSBpbiB0aGUgU3dlZXQgQWxlcnRcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEVsID0gdGhpcy5zd2FsUGFydGlhbCA/IHRoaXMuc3dhbFBhcnRpYWwoKSA6IHRoaXMuc3dhbFRhcmdldHMuY29udGVudCgpO1xuICAgICAgICAgICAgY29uc3QgZmFjdG9yeSA9IHRoaXMucmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoU3dhbFBhcnRpYWxDb21wb25lbnQpO1xuXG4gICAgICAgICAgICB0aGlzLnBhcnRpYWxSZWYgPSBmYWN0b3J5LmNyZWF0ZSh0aGlzLmluamVjdG9yLCBbXSwgdGFyZ2V0RWwpO1xuXG4gICAgICAgICAgICAvLz0+IEFwcGx5IHRoZSBjb25zdW1lcidzIHRlbXBsYXRlIG9uIHRoZSBjb21wb25lbnRcbiAgICAgICAgICAgIHRoaXMucGFydGlhbFJlZi5pbnN0YW5jZS50ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVSZWY7XG5cbiAgICAgICAgICAgIC8vPT4gTWFrZSB0aGUgQW5ndWxhciBhcHAgYXdhcmUgb2YgdGhhdCBkZXRhY2hlZCB2aWV3IHNvIGNoYW5nZSBkZXRlY3Rpb24gd29ya3NcbiAgICAgICAgICAgIHRoaXMuYXBwLmF0dGFjaFZpZXcodGhpcy5wYXJ0aWFsUmVmLmhvc3RWaWV3KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbiA9IHRoaXMuc3dhbENvbXBvbmVudC5jbG9zZS5hc09ic2VydmFibGUoKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgLy89PiBEZXRhY2ggdGhlIHBhcnRpYWwgY29tcG9uZW50IGZyb20gdGhlIGFwcCBhbmQgZGVzdHJveSBpdFxuICAgICAgICAgICAgdGhpcy5hcHAuZGV0YWNoVmlldyh0aGlzLnBhcnRpYWxSZWYuaG9zdFZpZXcpO1xuICAgICAgICAgICAgdGhpcy5wYXJ0aWFsUmVmLmRlc3Ryb3koKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVW5zdWJzY3JpYmVzIGZyb20gdGhlIFN3ZWV0IEFsZXJ0IGFwcGVhcmFuY2UvZGlzYXBwZWFyYW5jZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYmVmb3JlT3BlblN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxufVxuIl19