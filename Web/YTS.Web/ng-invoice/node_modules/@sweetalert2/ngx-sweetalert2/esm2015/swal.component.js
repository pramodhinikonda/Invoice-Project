/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, Component, EventEmitter, Inject, Input, Output } from '@angular/core';
import Swal from 'sweetalert2';
import { SwalDefaults } from './di';
/**
 * <swal> component. See the README.md for usage.
 *
 * It contains a bunch of \@Inputs that have a perfect 1:1 mapping with SweetAlert2 options.
 * Their types are directly coming from SweetAlert2 types defintitions, meaning that ngx-sweetalert2 is tightly coupled
 * to SweetAlert2, but also is type-safe.
 *
 * /!\ Some SweetAlert options aren't \@Inputs but \@Outputs: onBeforeOpen, onOpen, and onClose (without "on*" prefix).
 *     However, preConfirm and inputValidtor are still \@Inputs because there are not event handlers, there can't be
 *     multiple listeners and we need the Promise they must return.
 *
 * /!\ You can notice that the SweetAlert2 `useRejections` and `expectRejections` are the only one to not have
 *     an \@Input(). That's because they are deprecated and not using the default value of these parameters leads to
 *     clunky control flow. They are supported (use [options]="{}"), but please don't use them.
 */
export class SwalComponent {
    /**
     * @param {?} defaultSwalOptions
     */
    constructor(defaultSwalOptions) {
        this.defaultSwalOptions = defaultSwalOptions;
        /**
         * Emits a BeforeOpenEvent when the modal DOM element has been created.
         * Useful to perform DOM mutations before the modal is shown.
         */
        this.beforeOpen = new EventEmitter();
        /**
         * Emits an OpenEvent when the modal is shown.
         */
        this.open = new EventEmitter();
        /**
         * Emits a CloseEvent when modal get closed.
         */
        this.close = new EventEmitter();
        /**
         * Emits when the user clicks "Confirm".
         * Bears a value when using "input", resolved "preConfirm", etc.
         *
         * Example:
         *     public handleConfirm(email: string): void {
         *         // ... save user email
         *     }
         */
        this.confirm = new EventEmitter();
        /**
         * Emits when the user clicks "Cancel" (or dismisses the modal by any other way).
         * By default, it will emit a string representing the reason for which the SweetAlert has been closed, or the
         * value of a rejected "preConfirm".
         *
         * Example:
         *     public handleCancel(reason: string): void {
         *         // reason can be 'cancel', 'overlay', 'close', and 'timer'
         *         // ... do something
         *     }
         */
        this.cancel = new EventEmitter();
        this.nativeSwal = Swal;
        this.isCurrentlyShown = false;
        this.touchedProps = new Set();
        this.markTouched = this.touchedProps.add.bind(this.touchedProps);
        //=> Force `this` scope of show() on this component
        //   Useful for doing things like (click)="mySwal.show()".
        this.show = this.show.bind(this);
    }
    /**
     * An object of SweetAlert2 native options, useful if:
     *  - you don't want to use the \@Inputs for practical/philosophical reasons ;
     *  - there are missing \@Inputs because ngx-sweetalert2 isn't up-to-date with SweetAlert2's latest changes.
     *
     * /!\ Be aware that the options defined in this object will override the \@Inputs of the same name.
     * @param {?} options
     * @return {?}
     */
    set options(options) {
        Object.assign(this, options);
        Object.keys(options).forEach(this.markTouched);
    }
    /**
     * @return {?}
     */
    get options() {
        /** @type {?} */
        const options = {};
        //=> We will compute the options object based on the option keys that are known to have changed.
        // That avoids passing a gigantic object to SweetAlert2, making debugging easier and potentially avoiding
        // side effects.
        this.touchedProps.forEach(prop => {
            options[prop] = ((/** @type {?} */ (this)))[prop];
        });
        return options;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        Object.keys(changes)
            .filter(prop => prop !== 'options')
            .forEach(this.markTouched);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.isCurrentlyShown) {
            Swal.close();
        }
    }
    /**
     * Shows the SweetAlert.
     *
     * Returns the SweetAlert2 promise for convenience and use in code behind templates.
     * Otherwise, (confirm)="myHandler($event)" and (cancel)="myHandler($event)" can be used in templates.
     * @return {?}
     */
    show() {
        //=> Build the SweetAlert2 options
        /** @type {?} */
        const options = Object.assign({}, this.defaultSwalOptions, this.options, { onBeforeOpen: (modalElement) => {
                this.beforeOpen.emit({ modalElement });
            }, onOpen: (modalElement) => {
                this.isCurrentlyShown = true;
                this.open.emit({ modalElement });
            }, onClose: (modalElement) => {
                this.isCurrentlyShown = false;
                this.close.emit({ modalElement });
            } });
        //=> Show the Swal!
        /** @type {?} */
        const promise = Swal.fire(options);
        //=> Handle (confirm) and (cancel) @Outputs
        // tslint:disable-next-line:no-string-literal
        /** @type {?} */
        const useRejections = ((/** @type {?} */ (options))).useRejections;
        promise.then(result => {
            if (useRejections) {
                this.confirm.emit(result);
            }
            else if ('value' in result) {
                this.confirm.emit(result.value);
            }
            else {
                this.cancel.emit(result.dismiss);
            }
        }, err => {
            if (useRejections) {
                this.cancel.emit(err);
            }
        });
        //=> Return the unaltered promise
        return promise;
    }
}
SwalComponent.decorators = [
    { type: Component, args: [{
                selector: 'swal',
                template: '',
                changeDetection: ChangeDetectionStrategy.OnPush
            }] }
];
/** @nocollapse */
SwalComponent.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [SwalDefaults,] }] }
];
SwalComponent.propDecorators = {
    title: [{ type: Input }],
    titleText: [{ type: Input }],
    text: [{ type: Input }],
    html: [{ type: Input }],
    footer: [{ type: Input }],
    type: [{ type: Input }],
    backdrop: [{ type: Input }],
    toast: [{ type: Input }],
    target: [{ type: Input }],
    input: [{ type: Input }],
    width: [{ type: Input }],
    padding: [{ type: Input }],
    background: [{ type: Input }],
    position: [{ type: Input }],
    grow: [{ type: Input }],
    customClass: [{ type: Input }],
    timer: [{ type: Input }],
    animation: [{ type: Input }],
    allowOutsideClick: [{ type: Input }],
    allowEscapeKey: [{ type: Input }],
    allowEnterKey: [{ type: Input }],
    showConfirmButton: [{ type: Input }],
    showCancelButton: [{ type: Input }],
    confirmButtonText: [{ type: Input }],
    cancelButtonText: [{ type: Input }],
    confirmButtonColor: [{ type: Input }],
    cancelButtonColor: [{ type: Input }],
    confirmButtonClass: [{ type: Input }],
    cancelButtonClass: [{ type: Input }],
    confirmButtonAriaLabel: [{ type: Input }],
    cancelButtonAriaLabel: [{ type: Input }],
    buttonsStyling: [{ type: Input }],
    reverseButtons: [{ type: Input }],
    focusConfirm: [{ type: Input }],
    focusCancel: [{ type: Input }],
    showCloseButton: [{ type: Input }],
    closeButtonAriaLabel: [{ type: Input }],
    showLoaderOnConfirm: [{ type: Input }],
    preConfirm: [{ type: Input }],
    imageUrl: [{ type: Input }],
    imageWidth: [{ type: Input }],
    imageHeight: [{ type: Input }],
    imageAlt: [{ type: Input }],
    imageClass: [{ type: Input }],
    inputPlaceholder: [{ type: Input }],
    inputValue: [{ type: Input }],
    inputOptions: [{ type: Input }],
    inputAutoTrim: [{ type: Input }],
    inputAttributes: [{ type: Input }],
    inputValidator: [{ type: Input }],
    inputClass: [{ type: Input }],
    progressSteps: [{ type: Input }],
    currentProgressStep: [{ type: Input }],
    progressStepsDistance: [{ type: Input }],
    beforeOpen: [{ type: Output }],
    open: [{ type: Output }],
    close: [{ type: Output }],
    confirm: [{ type: Output }],
    cancel: [{ type: Output }],
    options: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    SwalComponent.prototype.title;
    /** @type {?} */
    SwalComponent.prototype.titleText;
    /** @type {?} */
    SwalComponent.prototype.text;
    /** @type {?} */
    SwalComponent.prototype.html;
    /** @type {?} */
    SwalComponent.prototype.footer;
    /** @type {?} */
    SwalComponent.prototype.type;
    /** @type {?} */
    SwalComponent.prototype.backdrop;
    /** @type {?} */
    SwalComponent.prototype.toast;
    /** @type {?} */
    SwalComponent.prototype.target;
    /** @type {?} */
    SwalComponent.prototype.input;
    /** @type {?} */
    SwalComponent.prototype.width;
    /** @type {?} */
    SwalComponent.prototype.padding;
    /** @type {?} */
    SwalComponent.prototype.background;
    /** @type {?} */
    SwalComponent.prototype.position;
    /** @type {?} */
    SwalComponent.prototype.grow;
    /** @type {?} */
    SwalComponent.prototype.customClass;
    /** @type {?} */
    SwalComponent.prototype.timer;
    /** @type {?} */
    SwalComponent.prototype.animation;
    /** @type {?} */
    SwalComponent.prototype.allowOutsideClick;
    /** @type {?} */
    SwalComponent.prototype.allowEscapeKey;
    /** @type {?} */
    SwalComponent.prototype.allowEnterKey;
    /** @type {?} */
    SwalComponent.prototype.showConfirmButton;
    /** @type {?} */
    SwalComponent.prototype.showCancelButton;
    /** @type {?} */
    SwalComponent.prototype.confirmButtonText;
    /** @type {?} */
    SwalComponent.prototype.cancelButtonText;
    /** @type {?} */
    SwalComponent.prototype.confirmButtonColor;
    /** @type {?} */
    SwalComponent.prototype.cancelButtonColor;
    /** @type {?} */
    SwalComponent.prototype.confirmButtonClass;
    /** @type {?} */
    SwalComponent.prototype.cancelButtonClass;
    /** @type {?} */
    SwalComponent.prototype.confirmButtonAriaLabel;
    /** @type {?} */
    SwalComponent.prototype.cancelButtonAriaLabel;
    /** @type {?} */
    SwalComponent.prototype.buttonsStyling;
    /** @type {?} */
    SwalComponent.prototype.reverseButtons;
    /** @type {?} */
    SwalComponent.prototype.focusConfirm;
    /** @type {?} */
    SwalComponent.prototype.focusCancel;
    /** @type {?} */
    SwalComponent.prototype.showCloseButton;
    /** @type {?} */
    SwalComponent.prototype.closeButtonAriaLabel;
    /** @type {?} */
    SwalComponent.prototype.showLoaderOnConfirm;
    /** @type {?} */
    SwalComponent.prototype.preConfirm;
    /** @type {?} */
    SwalComponent.prototype.imageUrl;
    /** @type {?} */
    SwalComponent.prototype.imageWidth;
    /** @type {?} */
    SwalComponent.prototype.imageHeight;
    /** @type {?} */
    SwalComponent.prototype.imageAlt;
    /** @type {?} */
    SwalComponent.prototype.imageClass;
    /** @type {?} */
    SwalComponent.prototype.inputPlaceholder;
    /** @type {?} */
    SwalComponent.prototype.inputValue;
    /** @type {?} */
    SwalComponent.prototype.inputOptions;
    /** @type {?} */
    SwalComponent.prototype.inputAutoTrim;
    /** @type {?} */
    SwalComponent.prototype.inputAttributes;
    /** @type {?} */
    SwalComponent.prototype.inputValidator;
    /** @type {?} */
    SwalComponent.prototype.inputClass;
    /** @type {?} */
    SwalComponent.prototype.progressSteps;
    /** @type {?} */
    SwalComponent.prototype.currentProgressStep;
    /** @type {?} */
    SwalComponent.prototype.progressStepsDistance;
    /**
     * Emits a BeforeOpenEvent when the modal DOM element has been created.
     * Useful to perform DOM mutations before the modal is shown.
     * @type {?}
     */
    SwalComponent.prototype.beforeOpen;
    /**
     * Emits an OpenEvent when the modal is shown.
     * @type {?}
     */
    SwalComponent.prototype.open;
    /**
     * Emits a CloseEvent when modal get closed.
     * @type {?}
     */
    SwalComponent.prototype.close;
    /**
     * Emits when the user clicks "Confirm".
     * Bears a value when using "input", resolved "preConfirm", etc.
     *
     * Example:
     *     public handleConfirm(email: string): void {
     *         // ... save user email
     *     }
     * @type {?}
     */
    SwalComponent.prototype.confirm;
    /**
     * Emits when the user clicks "Cancel" (or dismisses the modal by any other way).
     * By default, it will emit a string representing the reason for which the SweetAlert has been closed, or the
     * value of a rejected "preConfirm".
     *
     * Example:
     *     public handleCancel(reason: string): void {
     *         // reason can be 'cancel', 'overlay', 'close', and 'timer'
     *         // ... do something
     *     }
     * @type {?}
     */
    SwalComponent.prototype.cancel;
    /** @type {?} */
    SwalComponent.prototype.nativeSwal;
    /** @type {?} */
    SwalComponent.prototype.isCurrentlyShown;
    /** @type {?} */
    SwalComponent.prototype.touchedProps;
    /** @type {?} */
    SwalComponent.prototype.markTouched;
    /** @type {?} */
    SwalComponent.prototype.defaultSwalOptions;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3dhbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3dlZXRhbGVydDIvbmd4LXN3ZWV0YWxlcnQyLyIsInNvdXJjZXMiOlsic3dhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDSCx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQXdCLE1BQU0sRUFDaEcsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxJQUEyQixNQUFNLGFBQWEsQ0FBQztBQUN0RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FBdUJwQyxNQUFNLE9BQU8sYUFBYTs7OztJQW1JdEIsWUFBMEQsa0JBQXFDO1FBQXJDLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBbUI7Ozs7O1FBckVyRSxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQTBCLENBQUM7Ozs7UUFLeEQsU0FBSSxHQUFHLElBQUksWUFBWSxFQUFvQixDQUFDOzs7O1FBSzVDLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBcUIsQ0FBQzs7Ozs7Ozs7OztRQVc5QyxZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQzs7Ozs7Ozs7Ozs7O1FBYWxDLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBMkJwRCxlQUFVLEdBQUcsSUFBSSxDQUFDO1FBRWpCLHFCQUFnQixHQUFHLEtBQUssQ0FBQztRQUVoQixpQkFBWSxHQUFHLElBQUksR0FBRyxFQUEyQixDQUFDO1FBRWxELGdCQUFXLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUd6RSxtREFBbUQ7UUFDbkQsMERBQTBEO1FBQzFELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckMs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QUFzRDs7SUFDdEQsbUNBQTREOztJQUM1RCxpQ0FBd0Q7O0lBQ3hELDZCQUFnRDs7SUFDaEQsb0NBQThEOztJQUM5RCw4QkFBa0Q7O0lBQ2xELGtDQUEwRDs7SUFDMUQsMENBQTBFOztJQUMxRSx1Q0FBb0U7O0lBQ3BFLHNDQUFrRTs7SUFDbEUsMENBQTBFOztJQUMxRSx5Q0FBd0U7O0lBQ3hFLDBDQUEwRTs7SUFDMUUseUNBQXdFOztJQUN4RSwyQ0FBNEU7O0lBQzVFLDBDQUEwRTs7SUFDMUUsMkNBQTRFOztJQUM1RSwwQ0FBMEU7O0lBQzFFLCtDQUFvRjs7SUFDcEYsOENBQWtGOztJQUNsRix1Q0FBb0U7O0lBQ3BFLHVDQUFvRTs7SUFDcEUscUNBQWdFOztJQUNoRSxvQ0FBOEQ7O0lBQzlELHdDQUFzRTs7SUFDdEUsNkNBQWdGOztJQUNoRiw0Q0FBOEU7O0lBQzlFLG1DQUE0RDs7SUFDNUQsaUNBQXdEOztJQUN4RCxtQ0FBNEQ7O0lBQzVELG9DQUE4RDs7SUFDOUQsaUNBQXdEOztJQUN4RCxtQ0FBNEQ7O0lBQzVELHlDQUF3RTs7SUFDeEUsbUNBQTREOztJQUM1RCxxQ0FBZ0U7O0lBQ2hFLHNDQUFrRTs7SUFDbEUsd0NBQXNFOztJQUN0RSx1Q0FBb0U7O0lBQ3BFLG1DQUE0RDs7SUFDNUQsc0NBQWtFOztJQUNsRSw0Q0FBOEU7O0lBQzlFLDhDQUFrRjs7Ozs7O0lBTWxGLG1DQUFrRjs7Ozs7SUFLbEYsNkJBQXNFOzs7OztJQUt0RSw4QkFBd0U7Ozs7Ozs7Ozs7O0lBV3hFLGdDQUE0RDs7Ozs7Ozs7Ozs7OztJQWE1RCwrQkFBMkQ7O0lBMkIzRCxtQ0FBeUI7O0lBRXpCLHlDQUFpQzs7SUFFakMscUNBQW1FOztJQUVuRSxvQ0FBNkU7O0lBRTFELDJDQUE0RSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbmplY3QsIElucHV0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IFN3YWwsIHsgU3dlZXRBbGVydE9wdGlvbnMgfSBmcm9tICdzd2VldGFsZXJ0Mic7XG5pbXBvcnQgeyBTd2FsRGVmYXVsdHMgfSBmcm9tICcuL2RpJztcbmltcG9ydCAqIGFzIGV2ZW50cyBmcm9tICcuL3N3YWwtZXZlbnRzJztcblxuLyoqXG4gKiA8c3dhbD4gY29tcG9uZW50LiBTZWUgdGhlIFJFQURNRS5tZCBmb3IgdXNhZ2UuXG4gKlxuICogSXQgY29udGFpbnMgYSBidW5jaCBvZiBASW5wdXRzIHRoYXQgaGF2ZSBhIHBlcmZlY3QgMToxIG1hcHBpbmcgd2l0aCBTd2VldEFsZXJ0MiBvcHRpb25zLlxuICogVGhlaXIgdHlwZXMgYXJlIGRpcmVjdGx5IGNvbWluZyBmcm9tIFN3ZWV0QWxlcnQyIHR5cGVzIGRlZmludGl0aW9ucywgbWVhbmluZyB0aGF0IG5neC1zd2VldGFsZXJ0MiBpcyB0aWdodGx5IGNvdXBsZWRcbiAqIHRvIFN3ZWV0QWxlcnQyLCBidXQgYWxzbyBpcyB0eXBlLXNhZmUuXG4gKlxuICogLyFcXCBTb21lIFN3ZWV0QWxlcnQgb3B0aW9ucyBhcmVuJ3QgQElucHV0cyBidXQgQE91dHB1dHM6IG9uQmVmb3JlT3Blbiwgb25PcGVuLCBhbmQgb25DbG9zZSAod2l0aG91dCBcIm9uKlwiIHByZWZpeCkuXG4gKiAgICAgSG93ZXZlciwgcHJlQ29uZmlybSBhbmQgaW5wdXRWYWxpZHRvciBhcmUgc3RpbGwgQElucHV0cyBiZWNhdXNlIHRoZXJlIGFyZSBub3QgZXZlbnQgaGFuZGxlcnMsIHRoZXJlIGNhbid0IGJlXG4gKiAgICAgbXVsdGlwbGUgbGlzdGVuZXJzIGFuZCB3ZSBuZWVkIHRoZSBQcm9taXNlIHRoZXkgbXVzdCByZXR1cm4uXG4gKlxuICogLyFcXCBZb3UgY2FuIG5vdGljZSB0aGF0IHRoZSBTd2VldEFsZXJ0MiBgdXNlUmVqZWN0aW9uc2AgYW5kIGBleHBlY3RSZWplY3Rpb25zYCBhcmUgdGhlIG9ubHkgb25lIHRvIG5vdCBoYXZlXG4gKiAgICAgYW4gQElucHV0KCkuIFRoYXQncyBiZWNhdXNlIHRoZXkgYXJlIGRlcHJlY2F0ZWQgYW5kIG5vdCB1c2luZyB0aGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGVzZSBwYXJhbWV0ZXJzIGxlYWRzIHRvXG4gKiAgICAgY2x1bmt5IGNvbnRyb2wgZmxvdy4gVGhleSBhcmUgc3VwcG9ydGVkICh1c2UgW29wdGlvbnNdPVwie31cIiksIGJ1dCBwbGVhc2UgZG9uJ3QgdXNlIHRoZW0uXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnc3dhbCcsXG4gICAgdGVtcGxhdGU6ICcnLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFN3YWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMsIE9uRGVzdHJveSB7XG4gICAgLy8gSWYgU3dhbCBnZXRzIG1vcmUgdGhhbiBhIGh1bmRyZWQgcHJvcHMsIEknbGwgd3JpdGUgYSBjb2RlIGdlbmVyYXRvciwgSSBwcm9taXNlLlxuICAgIC8vIEFuZCBJIGFsd2F5cyByZXNvbHZlKCkgbXkgcHJvbWlzZXMuXG4gICAgQElucHV0KCkgcHVibGljIHRpdGxlOiBTd2VldEFsZXJ0T3B0aW9uc1sndGl0bGUnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgdGl0bGVUZXh0OiBTd2VldEFsZXJ0T3B0aW9uc1sndGl0bGVUZXh0J107XG4gICAgQElucHV0KCkgcHVibGljIHRleHQ6IFN3ZWV0QWxlcnRPcHRpb25zWyd0ZXh0J107XG4gICAgQElucHV0KCkgcHVibGljIGh0bWw6IFN3ZWV0QWxlcnRPcHRpb25zWydodG1sJ107XG4gICAgQElucHV0KCkgcHVibGljIGZvb3RlcjogU3dlZXRBbGVydE9wdGlvbnNbJ2Zvb3RlciddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyB0eXBlOiBTd2VldEFsZXJ0T3B0aW9uc1sndHlwZSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBiYWNrZHJvcDogU3dlZXRBbGVydE9wdGlvbnNbJ2JhY2tkcm9wJ107XG4gICAgQElucHV0KCkgcHVibGljIHRvYXN0OiBTd2VldEFsZXJ0T3B0aW9uc1sndG9hc3QnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgdGFyZ2V0OiBTd2VldEFsZXJ0T3B0aW9uc1sndGFyZ2V0J107XG4gICAgQElucHV0KCkgcHVibGljIGlucHV0OiBTd2VldEFsZXJ0T3B0aW9uc1snaW5wdXQnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgd2lkdGg6IFN3ZWV0QWxlcnRPcHRpb25zWyd3aWR0aCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBwYWRkaW5nOiBTd2VldEFsZXJ0T3B0aW9uc1sncGFkZGluZyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBiYWNrZ3JvdW5kOiBTd2VldEFsZXJ0T3B0aW9uc1snYmFja2dyb3VuZCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBwb3NpdGlvbjogU3dlZXRBbGVydE9wdGlvbnNbJ3Bvc2l0aW9uJ107XG4gICAgQElucHV0KCkgcHVibGljIGdyb3c6IFN3ZWV0QWxlcnRPcHRpb25zWydncm93J107XG4gICAgQElucHV0KCkgcHVibGljIGN1c3RvbUNsYXNzOiBTd2VldEFsZXJ0T3B0aW9uc1snY3VzdG9tQ2xhc3MnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgdGltZXI6IFN3ZWV0QWxlcnRPcHRpb25zWyd0aW1lciddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBhbmltYXRpb246IFN3ZWV0QWxlcnRPcHRpb25zWydhbmltYXRpb24nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgYWxsb3dPdXRzaWRlQ2xpY2s6IFN3ZWV0QWxlcnRPcHRpb25zWydhbGxvd091dHNpZGVDbGljayddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBhbGxvd0VzY2FwZUtleTogU3dlZXRBbGVydE9wdGlvbnNbJ2FsbG93RXNjYXBlS2V5J107XG4gICAgQElucHV0KCkgcHVibGljIGFsbG93RW50ZXJLZXk6IFN3ZWV0QWxlcnRPcHRpb25zWydhbGxvd0VudGVyS2V5J107XG4gICAgQElucHV0KCkgcHVibGljIHNob3dDb25maXJtQnV0dG9uOiBTd2VldEFsZXJ0T3B0aW9uc1snc2hvd0NvbmZpcm1CdXR0b24nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgc2hvd0NhbmNlbEJ1dHRvbjogU3dlZXRBbGVydE9wdGlvbnNbJ3Nob3dDYW5jZWxCdXR0b24nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgY29uZmlybUJ1dHRvblRleHQ6IFN3ZWV0QWxlcnRPcHRpb25zWydjb25maXJtQnV0dG9uVGV4dCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjYW5jZWxCdXR0b25UZXh0OiBTd2VldEFsZXJ0T3B0aW9uc1snY2FuY2VsQnV0dG9uVGV4dCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjb25maXJtQnV0dG9uQ29sb3I6IFN3ZWV0QWxlcnRPcHRpb25zWydjb25maXJtQnV0dG9uQ29sb3InXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgY2FuY2VsQnV0dG9uQ29sb3I6IFN3ZWV0QWxlcnRPcHRpb25zWydjYW5jZWxCdXR0b25Db2xvciddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjb25maXJtQnV0dG9uQ2xhc3M6IFN3ZWV0QWxlcnRPcHRpb25zWydjb25maXJtQnV0dG9uQ2xhc3MnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgY2FuY2VsQnV0dG9uQ2xhc3M6IFN3ZWV0QWxlcnRPcHRpb25zWydjYW5jZWxCdXR0b25DbGFzcyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjb25maXJtQnV0dG9uQXJpYUxhYmVsOiBTd2VldEFsZXJ0T3B0aW9uc1snY29uZmlybUJ1dHRvbkFyaWFMYWJlbCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjYW5jZWxCdXR0b25BcmlhTGFiZWw6IFN3ZWV0QWxlcnRPcHRpb25zWydjYW5jZWxCdXR0b25BcmlhTGFiZWwnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgYnV0dG9uc1N0eWxpbmc6IFN3ZWV0QWxlcnRPcHRpb25zWydidXR0b25zU3R5bGluZyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyByZXZlcnNlQnV0dG9uczogU3dlZXRBbGVydE9wdGlvbnNbJ3JldmVyc2VCdXR0b25zJ107XG4gICAgQElucHV0KCkgcHVibGljIGZvY3VzQ29uZmlybTogU3dlZXRBbGVydE9wdGlvbnNbJ2ZvY3VzQ29uZmlybSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBmb2N1c0NhbmNlbDogU3dlZXRBbGVydE9wdGlvbnNbJ2ZvY3VzQ2FuY2VsJ107XG4gICAgQElucHV0KCkgcHVibGljIHNob3dDbG9zZUJ1dHRvbjogU3dlZXRBbGVydE9wdGlvbnNbJ3Nob3dDbG9zZUJ1dHRvbiddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjbG9zZUJ1dHRvbkFyaWFMYWJlbDogU3dlZXRBbGVydE9wdGlvbnNbJ2Nsb3NlQnV0dG9uQXJpYUxhYmVsJ107XG4gICAgQElucHV0KCkgcHVibGljIHNob3dMb2FkZXJPbkNvbmZpcm06IFN3ZWV0QWxlcnRPcHRpb25zWydzaG93TG9hZGVyT25Db25maXJtJ107XG4gICAgQElucHV0KCkgcHVibGljIHByZUNvbmZpcm06IFN3ZWV0QWxlcnRPcHRpb25zWydwcmVDb25maXJtJ107XG4gICAgQElucHV0KCkgcHVibGljIGltYWdlVXJsOiBTd2VldEFsZXJ0T3B0aW9uc1snaW1hZ2VVcmwnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaW1hZ2VXaWR0aDogU3dlZXRBbGVydE9wdGlvbnNbJ2ltYWdlV2lkdGgnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaW1hZ2VIZWlnaHQ6IFN3ZWV0QWxlcnRPcHRpb25zWydpbWFnZUhlaWdodCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbWFnZUFsdDogU3dlZXRBbGVydE9wdGlvbnNbJ2ltYWdlQWx0J107XG4gICAgQElucHV0KCkgcHVibGljIGltYWdlQ2xhc3M6IFN3ZWV0QWxlcnRPcHRpb25zWydpbWFnZUNsYXNzJ107XG4gICAgQElucHV0KCkgcHVibGljIGlucHV0UGxhY2Vob2xkZXI6IFN3ZWV0QWxlcnRPcHRpb25zWydpbnB1dFBsYWNlaG9sZGVyJ107XG4gICAgQElucHV0KCkgcHVibGljIGlucHV0VmFsdWU6IFN3ZWV0QWxlcnRPcHRpb25zWydpbnB1dFZhbHVlJ107XG4gICAgQElucHV0KCkgcHVibGljIGlucHV0T3B0aW9uczogU3dlZXRBbGVydE9wdGlvbnNbJ2lucHV0T3B0aW9ucyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbnB1dEF1dG9UcmltOiBTd2VldEFsZXJ0T3B0aW9uc1snaW5wdXRBdXRvVHJpbSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbnB1dEF0dHJpYnV0ZXM6IFN3ZWV0QWxlcnRPcHRpb25zWydpbnB1dEF0dHJpYnV0ZXMnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaW5wdXRWYWxpZGF0b3I6IFN3ZWV0QWxlcnRPcHRpb25zWydpbnB1dFZhbGlkYXRvciddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbnB1dENsYXNzOiBTd2VldEFsZXJ0T3B0aW9uc1snaW5wdXRDbGFzcyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBwcm9ncmVzc1N0ZXBzOiBTd2VldEFsZXJ0T3B0aW9uc1sncHJvZ3Jlc3NTdGVwcyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjdXJyZW50UHJvZ3Jlc3NTdGVwOiBTd2VldEFsZXJ0T3B0aW9uc1snY3VycmVudFByb2dyZXNzU3RlcCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBwcm9ncmVzc1N0ZXBzRGlzdGFuY2U6IFN3ZWV0QWxlcnRPcHRpb25zWydwcm9ncmVzc1N0ZXBzRGlzdGFuY2UnXTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGEgQmVmb3JlT3BlbkV2ZW50IHdoZW4gdGhlIG1vZGFsIERPTSBlbGVtZW50IGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICogVXNlZnVsIHRvIHBlcmZvcm0gRE9NIG11dGF0aW9ucyBiZWZvcmUgdGhlIG1vZGFsIGlzIHNob3duLlxuICAgICAqL1xuICAgIEBPdXRwdXQoKSBwdWJsaWMgcmVhZG9ubHkgYmVmb3JlT3BlbiA9IG5ldyBFdmVudEVtaXR0ZXI8ZXZlbnRzLkJlZm9yZU9wZW5FdmVudD4oKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIE9wZW5FdmVudCB3aGVuIHRoZSBtb2RhbCBpcyBzaG93bi5cbiAgICAgKi9cbiAgICBAT3V0cHV0KCkgcHVibGljIHJlYWRvbmx5IG9wZW4gPSBuZXcgRXZlbnRFbWl0dGVyPGV2ZW50cy5PcGVuRXZlbnQ+KCk7XG5cbiAgICAvKipcbiAgICAgKiBFbWl0cyBhIENsb3NlRXZlbnQgd2hlbiBtb2RhbCBnZXQgY2xvc2VkLlxuICAgICAqL1xuICAgIEBPdXRwdXQoKSBwdWJsaWMgcmVhZG9ubHkgY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPGV2ZW50cy5DbG9zZUV2ZW50PigpO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHMgd2hlbiB0aGUgdXNlciBjbGlja3MgXCJDb25maXJtXCIuXG4gICAgICogQmVhcnMgYSB2YWx1ZSB3aGVuIHVzaW5nIFwiaW5wdXRcIiwgcmVzb2x2ZWQgXCJwcmVDb25maXJtXCIsIGV0Yy5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICogICAgIHB1YmxpYyBoYW5kbGVDb25maXJtKGVtYWlsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgKiAgICAgICAgIC8vIC4uLiBzYXZlIHVzZXIgZW1haWxcbiAgICAgKiAgICAgfVxuICAgICAqL1xuICAgIEBPdXRwdXQoKSBwdWJsaWMgcmVhZG9ubHkgY29uZmlybSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHMgd2hlbiB0aGUgdXNlciBjbGlja3MgXCJDYW5jZWxcIiAob3IgZGlzbWlzc2VzIHRoZSBtb2RhbCBieSBhbnkgb3RoZXIgd2F5KS5cbiAgICAgKiBCeSBkZWZhdWx0LCBpdCB3aWxsIGVtaXQgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSByZWFzb24gZm9yIHdoaWNoIHRoZSBTd2VldEFsZXJ0IGhhcyBiZWVuIGNsb3NlZCwgb3IgdGhlXG4gICAgICogdmFsdWUgb2YgYSByZWplY3RlZCBcInByZUNvbmZpcm1cIi5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICogICAgIHB1YmxpYyBoYW5kbGVDYW5jZWwocmVhc29uOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgKiAgICAgICAgIC8vIHJlYXNvbiBjYW4gYmUgJ2NhbmNlbCcsICdvdmVybGF5JywgJ2Nsb3NlJywgYW5kICd0aW1lcidcbiAgICAgKiAgICAgICAgIC8vIC4uLiBkbyBzb21ldGhpbmdcbiAgICAgKiAgICAgfVxuICAgICAqL1xuICAgIEBPdXRwdXQoKSBwdWJsaWMgcmVhZG9ubHkgY2FuY2VsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3Qgb2YgU3dlZXRBbGVydDIgbmF0aXZlIG9wdGlvbnMsIHVzZWZ1bCBpZjpcbiAgICAgKiAgLSB5b3UgZG9uJ3Qgd2FudCB0byB1c2UgdGhlIEBJbnB1dHMgZm9yIHByYWN0aWNhbC9waGlsb3NvcGhpY2FsIHJlYXNvbnMgO1xuICAgICAqICAtIHRoZXJlIGFyZSBtaXNzaW5nIEBJbnB1dHMgYmVjYXVzZSBuZ3gtc3dlZXRhbGVydDIgaXNuJ3QgdXAtdG8tZGF0ZSB3aXRoIFN3ZWV0QWxlcnQyJ3MgbGF0ZXN0IGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiAvIVxcIEJlIGF3YXJlIHRoYXQgdGhlIG9wdGlvbnMgZGVmaW5lZCBpbiB0aGlzIG9iamVjdCB3aWxsIG92ZXJyaWRlIHRoZSBASW5wdXRzIG9mIHRoZSBzYW1lIG5hbWUuXG4gICAgICovXG4gICAgQElucHV0KCkgcHVibGljIHNldCBvcHRpb25zKG9wdGlvbnM6IFN3ZWV0QWxlcnRPcHRpb25zKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgb3B0aW9ucyk7XG4gICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2godGhpcy5tYXJrVG91Y2hlZCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBvcHRpb25zKCk6IFN3ZWV0QWxlcnRPcHRpb25zIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogU3dlZXRBbGVydE9wdGlvbnMgPSB7fTtcblxuICAgICAgICAvLz0+IFdlIHdpbGwgY29tcHV0ZSB0aGUgb3B0aW9ucyBvYmplY3QgYmFzZWQgb24gdGhlIG9wdGlvbiBrZXlzIHRoYXQgYXJlIGtub3duIHRvIGhhdmUgY2hhbmdlZC5cbiAgICAgICAgLy8gVGhhdCBhdm9pZHMgcGFzc2luZyBhIGdpZ2FudGljIG9iamVjdCB0byBTd2VldEFsZXJ0MiwgbWFraW5nIGRlYnVnZ2luZyBlYXNpZXIgYW5kIHBvdGVudGlhbGx5IGF2b2lkaW5nXG4gICAgICAgIC8vIHNpZGUgZWZmZWN0cy5cbiAgICAgICAgdGhpcy50b3VjaGVkUHJvcHMuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICAgIG9wdGlvbnNbcHJvcF0gPSAodGhpcyBhcyB7IFtwcm9wOiBzdHJpbmddOiBhbnkgfSlbcHJvcF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cblxuICAgIHB1YmxpYyBuYXRpdmVTd2FsID0gU3dhbDtcblxuICAgIHByaXZhdGUgaXNDdXJyZW50bHlTaG93biA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSB0b3VjaGVkUHJvcHMgPSBuZXcgU2V0PGtleW9mIFN3ZWV0QWxlcnRPcHRpb25zPigpO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBtYXJrVG91Y2hlZCA9IHRoaXMudG91Y2hlZFByb3BzLmFkZC5iaW5kKHRoaXMudG91Y2hlZFByb3BzKTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihASW5qZWN0KFN3YWxEZWZhdWx0cykgcHJpdmF0ZSByZWFkb25seSBkZWZhdWx0U3dhbE9wdGlvbnM6IFN3ZWV0QWxlcnRPcHRpb25zKSB7XG4gICAgICAgIC8vPT4gRm9yY2UgYHRoaXNgIHNjb3BlIG9mIHNob3coKSBvbiB0aGlzIGNvbXBvbmVudFxuICAgICAgICAvLyAgIFVzZWZ1bCBmb3IgZG9pbmcgdGhpbmdzIGxpa2UgKGNsaWNrKT1cIm15U3dhbC5zaG93KClcIi5cbiAgICAgICAgdGhpcy5zaG93ID0gdGhpcy5zaG93LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LmtleXMoY2hhbmdlcylcbiAgICAgICAgICAgIC5maWx0ZXIocHJvcCA9PiBwcm9wICE9PSAnb3B0aW9ucycpXG4gICAgICAgICAgICAuZm9yRWFjaCh0aGlzLm1hcmtUb3VjaGVkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzQ3VycmVudGx5U2hvd24pIHtcbiAgICAgICAgICAgIFN3YWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3dzIHRoZSBTd2VldEFsZXJ0LlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgU3dlZXRBbGVydDIgcHJvbWlzZSBmb3IgY29udmVuaWVuY2UgYW5kIHVzZSBpbiBjb2RlIGJlaGluZCB0ZW1wbGF0ZXMuXG4gICAgICogT3RoZXJ3aXNlLCAoY29uZmlybSk9XCJteUhhbmRsZXIoJGV2ZW50KVwiIGFuZCAoY2FuY2VsKT1cIm15SGFuZGxlcigkZXZlbnQpXCIgY2FuIGJlIHVzZWQgaW4gdGVtcGxhdGVzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzaG93KCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIC8vPT4gQnVpbGQgdGhlIFN3ZWV0QWxlcnQyIG9wdGlvbnNcbiAgICAgICAgY29uc3Qgb3B0aW9uczogU3dlZXRBbGVydE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAvLz0+IE1lcmdlIHdpdGggdGhlIGRlZmF1bHQgbW9kdWxlLWxldmVsIG9wdGlvbnNcbiAgICAgICAgICAgIC4uLnRoaXMuZGVmYXVsdFN3YWxPcHRpb25zLFxuXG4gICAgICAgICAgICAvLz0+IE1lcmdlIHdpdGggY2FsY3VsYXRlZCBvcHRpb25zIHNldCBmb3IgdGhhdCBzcGVjaWZpYyBzd2FsXG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG5cbiAgICAgICAgICAgIC8vPT4gSGFuZGxlIG1vZGFsIGxpZmVjeWNsZSBldmVudHNcbiAgICAgICAgICAgIG9uQmVmb3JlT3BlbjogKG1vZGFsRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlT3Blbi5lbWl0KHsgbW9kYWxFbGVtZW50IH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgb25PcGVuOiAobW9kYWxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0N1cnJlbnRseVNob3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4uZW1pdCh7IG1vZGFsRWxlbWVudCB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG9uQ2xvc2U6IChtb2RhbEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ3VycmVudGx5U2hvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlLmVtaXQoeyBtb2RhbEVsZW1lbnQgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy89PiBTaG93IHRoZSBTd2FsIVxuICAgICAgICBjb25zdCBwcm9taXNlID0gU3dhbC5maXJlKG9wdGlvbnMpO1xuXG4gICAgICAgIC8vPT4gSGFuZGxlIChjb25maXJtKSBhbmQgKGNhbmNlbCkgQE91dHB1dHNcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXN0cmluZy1saXRlcmFsXG4gICAgICAgIGNvbnN0IHVzZVJlamVjdGlvbnMgPSAob3B0aW9ucyBhcyB7IHVzZVJlamVjdGlvbnM/OiBib29sZWFuIH0pLnVzZVJlamVjdGlvbnM7XG5cbiAgICAgICAgcHJvbWlzZS50aGVuKFxuICAgICAgICAgICAgcmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodXNlUmVqZWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm0uZW1pdChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maXJtLmVtaXQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbC5lbWl0KHJlc3VsdC5kaXNtaXNzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodXNlUmVqZWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbC5lbWl0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIC8vPT4gUmV0dXJuIHRoZSB1bmFsdGVyZWQgcHJvbWlzZVxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG59XG4iXX0=